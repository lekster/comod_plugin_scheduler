<!DOCTYPE html>
<html>
<head>
    <title>CRUD Table</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="/frontend/web/js_new/bootstrap-3.3.7-dist/css/bootstrap.min.css" type="text/css">

    <script language="javascript" src="/frontend/web/js_new/jq-3.1.1/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="/frontend/web/js_new/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/frontend/web/js_new/bootstrap-validator/dist/validator.js"></script>
    <link rel="stylesheet" type="text/css" href="/frontend/web/js_new/bootstrap-select/dist/css/bootstrap-select.min.css" />
<script type="text/javascript" src="/frontend/web/js_new/bootstrap-select/dist/js/bootstrap-select.min.js"></script>




<script type="text/javascript" src="moment-2.17.1/min/moment.min.js"></script>
<script type="text/javascript" src="moment-2.17.1/locale/ru.js"></script>
<script type="text/javascript" src="bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" type="text/css">

<link rel="stylesheet" type="text/css" href="/frontend/web/scheduler/weekline/styles/jquery.weekLine.css" />
<link rel="stylesheet" type="text/css" href="/frontend/web/scheduler/weekline/styles/cleanslate.css" />
<script type="text/javascript" src="/frontend/web/scheduler/weekline/scripts/jquery.weekLine.js"></script>

<script src="/frontend/web/scheduler/timedropper/timedropper.js"></script>
<link rel="stylesheet" type="text/css" href="/frontend/web/scheduler/timedropper/timedropper.css"> 


<script src="/frontend/web/scheduler/later/later.min.js" type="text/javascript"></script>
<script src="/frontend/web/scheduler/prettycron/prettycron.js" type="text/javascript"></script>

<script>

$('.selectpicker').selectpicker({
  style: 'btn-info',
  size: 4
});


function ttt()
{

   var cur_val = $( "#cron_result" ).val().split(" ");
   console.log(cur_val[4]);

}

$(function() {
  
   /*$("#weekCal").weekLine({
        onChange: function () {
                $("#selectedDays").html(
                        $(this).weekLine('getSelected', 'indexes')
                );
        }
    });*/
    $("#weekCal").weekLine({
        onChange: function () { 
            var days = $(this).weekLine('getSelected', 'indexes'); 
            //alert($( "#alarm" ).val());
            var cur_val = $( "#cron_result" ).val().split(" ");
            cur_val[4] = days;
            if (cur_val[4].trim().length == 0)
                cur_val[4] = '*';

            /*console.log(days);
            console.log(cur_val[4]);
            console.log(cur_val.join(' '));
            console.log("#############");
            */

            $( "#cron_result" ).val(cur_val.join(' '));
            var log = prettyCron.toString($( "#cron_result" ).val());
            $( "#cron_result_text" ).val(log);

        }

    });

//http://codebits.weebly.com/plugins/category/weekline-day-picker#0

    $( "#alarm" ).timeDropper({
        onChange: function (hour, min) { alert (hour + '_' + min); }

    });



    var cr_str = "/5 10-20 * 11 1";
    console.log(prettyCron.toString(cr_str));
    $( "#cron_result" ).val(cr_str);
    var cur_val = $( "#cron_result" ).val().split(" ");
    console.log(cur_val[4]);


});

var s = later.parse.cron("adada");
alert("s");

//var cur_val = $( "#cron_result" ).val().split(" ");
//console.log(cur_val[4]);


</script>



<script>
 function collapsElement(id) {
 if ( document.getElementById(id).style.display != "none" ) {
 document.getElementById(id).style.display = 'none';
 }
 else {
 document.getElementById(id).style.display = '';
 //document.getElementById(id).slideDown('slow');

 }
 }
 </script>

<style>

.foo {
    line-height: 50px;
    border: solid black 1px;
    display: inline-block;
    vertical-align: middle;
}

</style>


<script>

function t1(dt,dt2)
{

}

</script>

</head>
<body>
  

<div><a class="open-content" href="javascript:collapsElement('opencontent')" title="" rel="nofollow">Периодическое</a>
    <div id="opencontent" style="display: none">
            
        <table>
            <tr>
                <td>    
                    <div class="form-group">
                        <span id="weekCal" class="form-control"></span>
                    </div>
                </td>
            </tr>

            <tr>
                <td>    
                    <div class="form-group">
                        <input type="text" class="form-control" id="alarm" />
                    </div>
                </td>
                <td>
                    <div class="form-group">
                        <input type="checkbox" class="form-control" id="every_time" >adads</input>
                    </div>

                </td>
            </tr>

        </table>    

            
            <!-- <textarea id="selectedDays" rows="3" cols="30" style=""></textarea> -->
            

        
    </div>
</div>



<div><a class="open-content" href="javascript:collapsElement('opencontent2')" title="" rel="nofollow">Разовое</a>
    <div id="opencontent2" style="display: none">
        <div class="form-group">
            <div class='input-group date' id='datetimepicker1'>
                <input type='text' class="form-control" />
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
            </div>

            <script type="text/javascript">
                $(function () {
                    $('#datetimepicker1').datetimepicker({
                        locale: 'ru',
                        format: "YYYY-MM-DD H:mm:ss"
                    });

                    $('#datetimepicker1').on('dp.change', function(e) {
                            //alert(e.date);
                            //var tmpdate = e.date._d.toISOString();
                            //alert(tmpdate);
                            //var dt = moment(e.date).format("YYYY-MM-DD H:mm:ss");
                            //alert(dt);
                        });
                });
            </script>
        </div>
    </div>
</div>
  


<div><a class="open-content" href="javascript:collapsElement('opencontent3')" title="" rel="nofollow">Кастомное</a>
    <div id="opencontent3" style="display: none">
        <div class="form-group">
            <input type="text" id='cron_custom' class='form-control'/>
        </div>
    </div>
</div>

<div class="form-group">
    <table>
        <tr>
        <td>
            <input type="text" id='cron_result' class='form-control' readonly />
        </td>
        </tr>

        <tr>
        <td>
            <input type="text" id='cron_result_text' class='form-control' readonly />
        </td>
        </tr>
    </table>

    
</div>


</body>
</html>

